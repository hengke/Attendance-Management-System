{% extends 'base.html' %}

{% block content %}
    <link href="/static/css/bootstrap-datetimepicker-standalone.min.css" rel="stylesheet">
    <link href="/static/css/bootstrap-select.min.css">
    <script src="/static/js/bootstrap-select.min.js"></script>
    <script src="/static/js/moment.min.js"></script>
    <script src="/static/js/bootstrap-datetimepicker.min.js"></script>
    <script src="/static/js/moment-with-locales.min.js"></script>

    <div class="jumbotron">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h2 class="panel-title">请假申请</h2>
            </div>
            <div class="panel-body">
                <form id="defaultForm" role="form" class="form-signin form-horizontal" action="/LeaveAsk/" method="post">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="leaveType" class="col-sm-4 control-label">假别：</label>
                        <div class='col-sm-8'>
                            <select class="form-control" id="leaveType" name="leaveType">
                                {% for leave_type in leave_type_list %}
                                        <option value="{{ leave_type.name }}">{{ leave_type.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="datetimepicker1" class="col-sm-4 control-label">开始日期：</label>
                        <div class="col-sm-4 date">
                            <input class="form-control" type="text" name="starttime" id="datetimepicker1" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="datetimepicker2" class="col-sm-4 control-label">结束时间：</label>
                        <div class="col-sm-4 date">
                            <input class="form-control" type="text" name="endtime" id="datetimepicker2" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="destination" class="col-sm-4 control-label">目的地：</label>
                        <div class="col-sm-4 date">
                            <input class="form-control" type="text" name="destination" id="destination" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputContent" class="col-sm-4 control-label">请假原因：</label>
                        <div class="col-sm-4">
                            <textarea rows="4" name="reason" class="form-control" id="inputContent"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-offset-4 col-sm-4">
                            <button type="submit" class="btn btn-success" id="sign_btn" style="height:50px;width:140px;cursor:pointer;font-size:20px;display:inline-block;"
                                    >提交申请</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
{#    </div>#}
    <script>
        $(function () {
            $('#datetimepicker1').datetimepicker({
                format: 'YYYY-MM-DD',
                locale: moment.locale('zh-cn')
            });
            $('#datetimepicker2').datetimepicker({
                format: 'YYYY-MM-DD',
                locale: moment.locale('zh-cn')
            });
        })
    </script>
    <script>
        $('.panel-body').on('submit', '#sign_btn', function () {
            $.post('/LeaveAsk/', {'sign':"{{ sign_flag }}"}, function (ret) {
                var gnl=confirm("确定要提交?");
                if (gnl==true){
                    return true;
                }else{
                    return false;
                };
            })
        });
    </script>
{% endblock content %}
{% block sidebar %}
    6
{% endblock sidebar %}